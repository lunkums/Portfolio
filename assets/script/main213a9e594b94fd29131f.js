(()=>{var t={406:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(537),i=r.n(n),o=r(645),s=r.n(o)()(i());s.push([t.id,"html,\r\nbody,\r\npre {\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n* {\r\n    background-color: #363d4a;\r\n}\r\n\r\nh1,\r\nfooter {\r\n    padding: 1rem;\r\n    margin: 0;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    height: 100%;\r\n}\r\n\r\n.flex {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n}\r\n\r\n.flex-end {\r\n    display: block;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.font {\r\n    font-family: 'Courier New', Courier, monospace;\r\n    color: white;\r\n}\r\n\r\n.centered {\r\n    text-align: center;\r\n}\r\n\r\n.dotted-border {\r\n    border: 1px dashed #cdced2;\r\n}\r\n\r\n.canvas-container {\r\n    width: 95vw; \r\n    height: calc(95vw * 9 / 16);\r\n  \r\n    /* align center */\r\n    margin: auto;\r\n    position: relative;\r\n    top: 0px; right: 0px; bottom: 0px; left: 0px;\r\n}\r\n\r\n  /* 100 * 16/9 = 177.778 */\r\n@media (min-width: 177.778vh) {\r\n    .canvas-container {\r\n      height: 80vh;\r\n      width: calc(80vh * 16 / 9);\r\n    }\r\n}\r\n\r\n#code00-canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n#overlay {\r\n    position: absolute;\r\n    left: 10px;\r\n    top: 10px;\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n    color: white;\r\n    font-family: monospace;\r\n    padding: 1em;\r\n}\r\n\r\n#overlay * {\r\n    background-color: rgba(0, 0, 0, 0);\r\n}\r\n\r\n#overlay em {\r\n    color: grey;\r\n}","",{version:3,sources:["webpack://./src/styles/stylesheet.css"],names:[],mappings:"AAAA;;;IAGI,UAAU;IACV,SAAS;AACb;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;;IAEI,aAAa;IACb,SAAS;AACb;;AAEA;;IAEI,YAAY;AAChB;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,YAAY;AAChB;;AAEA;IACI,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI,8CAA8C;IAC9C,YAAY;AAChB;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,0BAA0B;AAC9B;;AAEA;IACI,WAAW;IACX,2BAA2B;;IAE3B,iBAAiB;IACjB,YAAY;IACZ,kBAAkB;IAClB,QAAQ,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS;AAChD;;EAEE,yBAAyB;AAC3B;IACI;MACE,YAAY;MACZ,0BAA0B;IAC5B;AACJ;;AAEA;IACI,WAAW;IACX,YAAY;AAChB;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,SAAS;IACT,oCAAoC;IACpC,YAAY;IACZ,sBAAsB;IACtB,YAAY;AAChB;;AAEA;IACI,kCAAkC;AACtC;;AAEA;IACI,WAAW;AACf",sourcesContent:["html,\r\nbody,\r\npre {\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n* {\r\n    background-color: #363d4a;\r\n}\r\n\r\nh1,\r\nfooter {\r\n    padding: 1rem;\r\n    margin: 0;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    height: 100%;\r\n}\r\n\r\n.flex {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n}\r\n\r\n.flex-end {\r\n    display: block;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.font {\r\n    font-family: 'Courier New', Courier, monospace;\r\n    color: white;\r\n}\r\n\r\n.centered {\r\n    text-align: center;\r\n}\r\n\r\n.dotted-border {\r\n    border: 1px dashed #cdced2;\r\n}\r\n\r\n.canvas-container {\r\n    width: 95vw; \r\n    height: calc(95vw * 9 / 16);\r\n  \r\n    /* align center */\r\n    margin: auto;\r\n    position: relative;\r\n    top: 0px; right: 0px; bottom: 0px; left: 0px;\r\n}\r\n\r\n  /* 100 * 16/9 = 177.778 */\r\n@media (min-width: 177.778vh) {\r\n    .canvas-container {\r\n      height: 80vh;\r\n      width: calc(80vh * 16 / 9);\r\n    }\r\n}\r\n\r\n#code00-canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n#overlay {\r\n    position: absolute;\r\n    left: 10px;\r\n    top: 10px;\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n    color: white;\r\n    font-family: monospace;\r\n    padding: 1em;\r\n}\r\n\r\n#overlay * {\r\n    background-color: rgba(0, 0, 0, 0);\r\n}\r\n\r\n#overlay em {\r\n    color: grey;\r\n}"],sourceRoot:""}]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(s[u]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);n&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},379:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var o={},s=[],a=0;a<t.length;a++){var u=t[a],c=n.base?u[0]+n.base:u[0],l=o[c]||0,h="".concat(c," ").concat(l);o[c]=l+1;var f=r(h),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var y=i(d,n);n.byIndex=a,e.splice(a,0,{identifier:h,updater:y,references:1})}s.push(h)}return s}function i(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,i){var o=n(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=r(o[s]);e[a].references--}for(var u=n(t,i),c=0;c<o.length;c++){var l=r(o[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=u}}},569:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},368:t=>{t.exports="precision mediump float;\r\nvarying vec4 vColor; \r\n\r\nvoid main(void) {\r\n    gl_FragColor = vColor;\r\n}"},403:t=>{t.exports="attribute vec4 aVertexPosition;\r\nattribute vec4 aVertexColor;\r\n\r\nuniform mat4 uModelMatrix;\r\nuniform mat4 uViewProjectionMatrix;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main(void) {\r\n    gl_Position = uViewProjectionMatrix * uModelMatrix * aVertexPosition;\r\n    vColor = aVertexColor;\r\n}"},398:t=>{"use strict";t.exports=JSON.parse('{"moveForward":"W","moveBack":"S","moveLeft":"A","moveRight":"D","yaw":"P","pitch":"Y","roll":"R","reset":"`","shift":"Shift","toggleWireframe":"T"}')}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{"use strict";function t(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var n,i,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(i)?i:String(i)),n)}var i}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)},u(t)}function c(t,e,r){return c=h()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&f(i,r.prototype),i},c.apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}!function(e){addEventListener("keydown",(function(t){u(t.key,o.Down)})),addEventListener("keyup",(function(t){u(t.key,o.Up)})),addEventListener("focus",l),addEventListener("blur",l);var r=new Map,n=new Map,i=!1,o=function(t){return t[t.None=0]="None",t[t.Up=1]="Up",t[t.Down=2]="Down",t}({});function s(t,e){i||(e=c(e)),r.has(t)?console.error("Input already recognizes action: ".concat(t)):n.has(e)?console.error("Input already recognizes key: ".concat(e)):(r.set(t,e),n.set(e,o.Up))}function a(t){return r.has(t)?n.get(r.get(t)):(console.error("Input doesn't recognize action: ".concat(t)),o.None)}function u(t,e){i||(t=c(t)),n.has(t)&&n.set(t,e)}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(e){var r,i,s,a=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=t(e))){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}(n);try{for(a.s();!(r=a.n()).done;){var c=(i=r.value,s=2,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(i,s)||t(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0];c[1],u(l,o.Up)}}catch(t){a.e(t)}finally{a.f()}}e.initialize=function(t){i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Object.entries(t).forEach((function(t,e){s(t[0],t[1])}))},e.addAction=s,e.isActionUp=function(t){return a(t)===o.Up},e.isActionDown=function(t){return a(t)===o.Down}}(n||(n={})),(o=i||(i={})).EPSILON=1e-5,o.FLOATS_PER_VERTEX=3,o.FLOATS_PER_COLOR=4;var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(l,t);var e,r,n,o,u,c=(o=l,u=h(),function(){var t,e=d(o);if(u){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,16))[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}return e=l,n=[{key:"copy",value:function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}},{key:"fromRotationTranslationScale",value:function(t,e,r){var n=new l,i=t[0],o=t[1],s=t[2],a=t[3],u=i+i,c=o+o,h=s+s,f=i*u,d=i*c,y=i*h,p=o*c,v=o*h,b=s*h,m=a*u,A=a*c,C=a*h,g=r[0],w=r[1],x=r[2];return n[0]=(1-(p+b))*g,n[1]=(d+C)*g,n[2]=(y-A)*g,n[3]=0,n[4]=(d-C)*w,n[5]=(1-(f+b))*w,n[6]=(v+m)*w,n[7]=0,n[8]=(y+A)*x,n[9]=(v-m)*x,n[10]=(1-(f+p))*x,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}},{key:"multiply",value:function(t,e){var r=new l,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],h=t[7],f=t[8],d=t[9],y=t[10],p=t[11],v=t[12],b=t[13],m=t[14],A=t[15],C=e[0],g=e[1],w=e[2],x=e[3];return r[0]=C*n+g*a+w*f+x*v,r[1]=C*i+g*u+w*d+x*b,r[2]=C*o+g*c+w*y+x*m,r[3]=C*s+g*h+w*p+x*A,C=e[4],g=e[5],w=e[6],x=e[7],r[4]=C*n+g*a+w*f+x*v,r[5]=C*i+g*u+w*d+x*b,r[6]=C*o+g*c+w*y+x*m,r[7]=C*s+g*h+w*p+x*A,C=e[8],g=e[9],w=e[10],x=e[11],r[8]=C*n+g*a+w*f+x*v,r[9]=C*i+g*u+w*d+x*b,r[10]=C*o+g*c+w*y+x*m,r[11]=C*s+g*h+w*p+x*A,C=e[12],g=e[13],w=e[14],x=e[15],r[12]=C*n+g*a+w*f+x*v,r[13]=C*i+g*u+w*d+x*b,r[14]=C*o+g*c+w*y+x*m,r[15]=C*s+g*h+w*p+x*A,r}},{key:"perspective",value:function(t,e,r,n){var i,o=new l,s=1/Math.tan(t/2);return o[0]=s/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=n&&n!==1/0?(i=1/(r-n),o[10]=(n+r)*i,o[14]=2*n*r*i):(o[10]=-1,o[14]=-2*r),o}},{key:"translate",value:function(t,e){var r,n,i,o,s,a,u,c,h,f,d,y,p=new l,v=e[0],b=e[1],m=e[2];return r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],d=t[10],y=t[11],p[0]=r,p[1]=n,p[2]=i,p[3]=o,p[4]=s,p[5]=a,p[6]=u,p[7]=c,p[8]=h,p[9]=f,p[10]=d,p[11]=y,p[12]=r*v+s*b+h*m+t[12],p[13]=n*v+a*b+f*m+t[13],p[14]=i*v+u*b+d*m+t[14],p[15]=o*v+c*b+y*m+t[15],p}}],(r=[{key:"inverse",value:function(){var t=new l,e=this[0],r=this[1],n=this[2],i=this[3],o=this[4],s=this[5],a=this[6],u=this[7],c=this[8],h=this[9],f=this[10],d=this[11],y=this[12],p=this[13],v=this[14],b=this[15],m=e*s-r*o,A=e*a-n*o,C=e*u-i*o,g=r*a-n*s,w=r*u-i*s,x=n*u-i*a,S=c*p-h*y,k=c*v-f*y,R=c*b-d*y,E=h*v-f*p,P=h*b-d*p,T=f*b-d*v,O=m*T-A*P+C*E+g*R-w*k+x*S;return O?(O=1/O,t[0]=(s*T-a*P+u*E)*O,t[1]=(n*P-r*T-i*E)*O,t[2]=(p*x-v*w+b*g)*O,t[3]=(f*w-h*x-d*g)*O,t[4]=(a*R-o*T-u*k)*O,t[5]=(e*T-n*R+i*k)*O,t[6]=(v*C-y*x-b*A)*O,t[7]=(c*x-f*C+d*A)*O,t[8]=(o*P-s*R+u*S)*O,t[9]=(r*R-e*P-i*S)*O,t[10]=(y*w-p*C+b*m)*O,t[11]=(h*C-c*w-d*m)*O,t[12]=(s*k-o*E-a*S)*O,t[13]=(e*E-r*k+n*S)*O,t[14]=(p*A-y*g-v*m)*O,t[15]=(c*g-h*A+f*m)*O,t):null}},{key:"translate",value:function(t){var e=t[0],r=t[1],n=t[2];this[12]=this[0]*e+this[4]*r+this[8]*n+this[12],this[13]=this[1]*e+this[5]*r+this[9]*n+this[13],this[14]=this[2]*e+this[6]*r+this[10]*n+this[14],this[15]=this[3]*e+this[7]*r+this[11]*n+this[15]}},{key:"rotate",value:function(t,e){var r,n,o,s,a,u,c,l,h,f,d,y,p,v,b,m,A,C,g,w,x,S,k,R,E=e[0],P=e[1],T=e[2],O=Math.hypot(E,P,T);O<i.EPSILON||(E*=O=1/O,P*=O,T*=O,r=Math.sin(t),o=1-(n=Math.cos(t)),s=this[0],a=this[1],u=this[2],c=this[3],l=this[4],h=this[5],f=this[6],d=this[7],y=this[8],p=this[9],v=this[10],b=this[11],m=E*E*o+n,A=P*E*o+T*r,C=T*E*o-P*r,g=E*P*o-T*r,w=P*P*o+n,x=T*P*o+E*r,S=E*T*o+P*r,k=P*T*o-E*r,R=T*T*o+n,this[0]=s*m+l*A+y*C,this[1]=a*m+h*A+p*C,this[2]=u*m+f*A+v*C,this[3]=c*m+d*A+b*C,this[4]=s*g+l*w+y*x,this[5]=a*g+h*w+p*x,this[6]=u*g+f*w+v*x,this[7]=c*g+d*w+b*x,this[8]=s*S+l*k+y*R,this[9]=a*S+h*k+p*R,this[10]=u*S+f*k+v*R,this[11]=c*S+d*k+b*R)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}(u(Float32Array));function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(i)?i:String(i)),n)}var i}function b(t){var e="function"==typeof Map?new Map:void 0;return b=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return A(t,arguments,w(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,t)},b(t)}function A(t,e,r){return A=C()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&g(i,r.prototype),i},A.apply(null,arguments)}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(a,t);var e,r,n,i,o,s=(i=a,o=C(),function(){var t,e=w(i);if(o){var r=w(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,new Float32Array(4)))[0]=0,t[1]=0,t[2]=0,t[3]=1,t}return e=a,n=[{key:"copy",value:function(t){var e=new a;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{key:"fromEuler",value:function(t,e,r){var n=new a,i=.5*Math.PI/180;t*=i,e*=i,r*=i;var o=Math.sin(t),s=Math.cos(t),u=Math.sin(e),c=Math.cos(e),l=Math.sin(r),h=Math.cos(r);return n[0]=o*c*h-s*u*l,n[1]=s*u*h+o*c*l,n[2]=s*c*l-o*u*h,n[3]=s*c*h+o*u*l,n}},{key:"identity",get:function(){return new a}}],(r=[{key:"rotateX",value:function(t){t*=.5;var e=this[0],r=this[1],n=this[2],i=this[3],o=Math.sin(t),s=Math.cos(t);this[0]=e*s+i*o,this[1]=r*s+n*o,this[2]=n*s-r*o,this[3]=i*s-e*o}},{key:"rotateY",value:function(t){t*=.5;var e=this[0],r=this[1],n=this[2],i=this[3],o=Math.sin(t),s=Math.cos(t);this[0]=e*s-n*o,this[1]=r*s+i*o,this[2]=n*s+e*o,this[3]=i*s-r*o}},{key:"rotateZ",value:function(t){t*=.5;var e=this[0],r=this[1],n=this[2],i=this[3],o=Math.sin(t),s=Math.cos(t);this[0]=e*s+r*o,this[1]=r*s-e*o,this[2]=n*s+i*o,this[3]=i*s-n*o}}])&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(b(Float32Array));function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===S(i)?i:String(i)),n)}var i}function R(t){var e="function"==typeof Map?new Map:void 0;return R=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return E(t,arguments,O(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,t)},R(t)}function E(t,e,r){return E=P()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&T(i,r.prototype),i},E.apply(null,arguments)}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(a,t);var e,r,n,i,o,s=(i=a,o=P(),function(){var t,e=O(i);if(o){var r=O(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,3))[0]=e,t[1]=r,t[2]=n,t}return e=a,n=[{key:"add",value:function(t,e){return new a(t.x+e.x,t.y+e.y,t.z+e.z)}},{key:"copy",value:function(t){return new a(t.x,t.y,t.z)}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}},{key:"multiply",value:function(t,e){return new a(t.x*e,t.y*e,t.z*e)}},{key:"random",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new a(Math.random()*t,Math.random()*t,Math.random()*t)}},{key:"zero",get:function(){return new a(0,0,0)}},{key:"one",get:function(){return new a(1,1,1)}},{key:"right",get:function(){return new a(1,0,0)}},{key:"up",get:function(){return new a(0,1,0)}},{key:"forward",get:function(){return new a(0,0,1)}}],(r=[{key:"add",value:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}},{key:"multiply",value:function(t){this.x*=t,this.y*=t,this.z*=t}},{key:"normalize",value:function(){var t=this[0],e=this[1],r=this[2],n=t*t+e*e+r*r;n>0&&(n=1/Math.sqrt(n)),this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n}},{key:"subtract",value:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}},{key:"magnitude",get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t}}])&&k(e.prototype,r),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(R(Float32Array));function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==V(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===V(i)?i:String(i)),n)}var i}function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function z(t){var e=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===_(e)?e:String(e)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(s,t);var e,r,n,i,o=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(n);if(i){var r=N(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}(this,t)});function s(){var t,e,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=B(t=o.call(this)),n=[],(r=z(r="components"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.components=i,t}return e=s,r=[{key:"update",value:function(t){var e=this;this.components.forEach((function(r){r.update(t,e)}))}},{key:"render",value:function(t,e){var r=this;this.components.forEach((function(n){n.render(t,e,r)}))}},{key:"addComponent",value:function(t){this.components.push(t)}}],r&&M(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rotation=x.identity,this.translation=I.zero,this.scale=I.one}var e,r;return e=t,(r=[{key:"translate",value:function(t){this.translation.add(t)}},{key:"rotateX",value:function(t){this.rotation.rotateX(t)}},{key:"rotateY",value:function(t){this.rotation.rotateY(t)}},{key:"rotateZ",value:function(t){this.rotation.rotateZ(t)}},{key:"transformation",get:function(){return null==this.parentObj?y.fromRotationTranslationScale(this.rotation,this.translation,this.scale):y.multiply(this.parentObj.transformation,y.fromRotationTranslationScale(this.rotation,this.translation,this.scale))}},{key:"parent",set:function(t){this.parentObj=t}}])&&j(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===U(i)?i:String(i)),n)}var i}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(a,t);var e,r,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(i);if(o){var r=W(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this)).fovy=t,i.aspect=e,i.near=r,i.far=n,i}return e=a,n=[{key:"create",value:function(t){return new a(45*Math.PI/180,t.canvas.width/t.canvas.height,.1,100)}}],(r=[{key:"view",get:function(){return this.transformation.inverse()}},{key:"projection",get:function(){return y.perspective(this.fovy,this.aspect,this.near,this.far)}},{key:"viewProjection",get:function(){return y.multiply(this.projection,this.view)}}])&&L(e.prototype,r),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(D);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==Z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Z(i)?i:String(i)),n)}var i}var q=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.red=e,this.green=r,this.blue=n,this.alpha=i}var e,r,n;return e=t,n=[{key:"fromInt8",value:function(e,r,n){return new t(e/255,r/255,n/255,1)}},{key:"red",get:function(){return new t(1,0,0,1)}},{key:"green",get:function(){return new t(0,1,0,1)}},{key:"blue",get:function(){return new t(0,0,1,1)}},{key:"black",get:function(){return new t(0,0,0,1)}},{key:"lerp",value:function(e,r,n){return n=n>1?1:n<0?0:n,new t(this.lerpNum(e.r,r.r,n),this.lerpNum(e.g,r.g,n),this.lerpNum(e.b,r.b,n),this.lerpNum(e.a,r.a,n))}},{key:"lerpNum",value:function(t,e,r){return(1-r)*t+r*e}}],(r=[{key:"red",get:function(){return this.r},set:function(t){t=this.clamp("Red",t),this.r=t}},{key:"green",get:function(){return this.g},set:function(t){t=this.clamp("Green",t),this.g=t}},{key:"blue",get:function(){return this.b},set:function(t){t=this.clamp("Blue",t),this.b=t}},{key:"alpha",get:function(){return this.a},set:function(t){t=this.clamp("Alpha",t),this.a=t}},{key:"clamp",value:function(t,e){return e>1?(console.warn("".concat(t," component of color exceeds 1.0; value was clamped.")),e=1):e<0&&(console.warn("".concat(t," component of color is below 0; value was clamped.")),e=0),e}}])&&G(e.prototype,r),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function H(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(alert(t.getShaderInfoLog(n)),null)}function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===J(i)?i:String(i)),n)}var i}var K=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q.black;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shaderProgram=function(t,e,r){var n=t.createProgram(),i=H(t,t.FRAGMENT_SHADER,e),o=H(t,t.VERTEX_SHADER,r);return t.attachShader(n,o),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||alert("Could not initialise shaders"),t.useProgram(n),n}(e,r,n),this.vertexPositionAttribute=e.getAttribLocation(this.shaderProgram,"aVertexPosition"),e.enableVertexAttribArray(this.vertexPositionAttribute),this.vertexColorAttribute=e.getAttribLocation(this.shaderProgram,"aVertexColor"),e.enableVertexAttribArray(this.vertexColorAttribute),this.uniformModelMatrix=e.getUniformLocation(this.shaderProgram,"uModelMatrix"),this.uniformViewProjectionMatrix=e.getUniformLocation(this.shaderProgram,"uViewProjectionMatrix"),e.clearColor(i.red,i.green,i.blue,i.alpha)}var e,r,n;return e=t,r=[{key:"Begin",value:function(t){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.useProgram(this.shaderProgram),t.uniformMatrix4fv(this.uniformViewProjectionMatrix,!1,this.camera.viewProjection)}},{key:"camera",get:function(){return this.mainCamera}}],n=[{key:"create",value:function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q.black,o=X.create(e),s=new t(e,r,n,i);return s.mainCamera=o,s}}],r&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rt(t);if(e){var i=rt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===nt(i)?i:String(i)),n)}var i}function st(t,e,r){return e&&ot(t.prototype,e),r&&ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var at=function(){function t(){it(this,t)}return st(t,[{key:"update",value:function(t,e){}},{key:"render",value:function(t,e,r){}}]),t}(),ut=function(t){$(r,t);var e=et(r);function r(t,n,i,o,s){var a;return it(this,r),(a=e.call(this)).glDrawMode=t,a.vertexBuffer=n,a.colorBuffer=i,a.indexBuffer=o,a.vertexCount=s,a}return st(r,[{key:"render",value:function(t,e,r){t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.vertexAttribPointer(e.vertexPositionAttribute,i.FLOATS_PER_VERTEX,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.vertexPositionAttribute),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.vertexAttribPointer(e.vertexColorAttribute,i.FLOATS_PER_COLOR,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.vertexColorAttribute),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.uniformMatrix4fv(e.uniformModelMatrix,!1,r.transformation),this.wireframeEnabled?t.drawElements(t.LINE_STRIP,this.vertexCount,t.UNSIGNED_SHORT,0):t.drawElements(this.glDrawMode,this.vertexCount,t.UNSIGNED_SHORT,0)}},{key:"update",value:function(t,e){n.isActionDown("toggleWireframe")&&!n.isActionDown("shift")&&(this.wireframeEnabled=!0),n.isActionDown("toggleWireframe")&&n.isActionDown("shift")&&(this.wireframeEnabled=!1),n.isActionDown("reset")&&(this.wireframeEnabled=!1)}}],[{key:"create",value:function(t,e,n,o){if(e.length/i.FLOATS_PER_VERTEX!=n.length/i.FLOATS_PER_COLOR)return console.error("Number of vertices not equal to number of colors"),null;var s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW);var u=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),new r(t.TRIANGLES,s,a,u,o.length)}}]),r}(at),ct=function(t){$(r,t);var e=et(r);function r(t,n,i){var o;return it(this,r),(o=e.call(this)).xSpeed=t,o.ySpeed=n,o.zSpeed=i,o}return st(r,[{key:"update",value:function(t,e){e.rotateX(this.xSpeed*t),e.rotateY(this.ySpeed*t),e.rotateZ(this.zSpeed*t)}}]),r}(at),lt=function(t){$(r,t);var e=et(r);function r(t,n,i,o,s){var a,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return it(this,r),(a=e.call(this)).xSpeed=t,a.ySpeed=n,a.xInitial=i,a.yInitial=o,a.amplitude=s,a.time=u,a}return st(r,[{key:"update",value:function(t,e){this.time+=t,e.translation=new I(this.xInitial+this.amplitude*Math.sin(this.time*this.xSpeed),this.yInitial+this.amplitude*Math.sin(this.time*this.ySpeed),e.translation.z)}}]),r}(at),ht=function(t){$(r,t);var e=et(r);function r(t,n,i,o){var s;return it(this,r),(s=e.call(this)).yawSpeed=t,s.pitchSpeed=n,s.rollSpeed=i,s.initialRotation=x.copy(o),s}return st(r,[{key:"update",value:function(t,e){n.isActionDown("yaw")&&n.isActionDown("shift")?e.rotateX(this.yawSpeed*t):n.isActionDown("yaw")&&e.rotateX(-this.yawSpeed*t),n.isActionDown("pitch")&&n.isActionDown("shift")?e.rotateY(this.pitchSpeed*t):n.isActionDown("pitch")&&e.rotateY(-this.pitchSpeed*t),n.isActionDown("roll")&&n.isActionDown("shift")?e.rotateZ(this.rollSpeed*t):n.isActionDown("roll")&&e.rotateZ(-this.rollSpeed*t),n.isActionDown("reset")&&(e.rotation=x.copy(this.initialRotation))}}]),r}(at),ft=function(t){$(r,t);var e=et(r);function r(t,n){var i;return it(this,r),(i=e.call(this)).speed=t,i.initialTranslation=I.copy(n),i}return st(r,[{key:"update",value:function(t,e){var r=I.zero;n.isActionDown("moveForward")&&r.subtract(I.forward),n.isActionDown("moveBack")&&r.add(I.forward),n.isActionDown("moveLeft")&&r.subtract(I.right),n.isActionDown("moveRight")&&r.add(I.right),r.normalize(),e.translate(I.multiply(r,t*this.speed)),n.isActionDown("reset")&&(e.translation=I.copy(this.initialTranslation))}}]),r}(at);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==dt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===dt(i)?i:String(i)),n)}var i}var pt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:36,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,e||log("[WARNING] Cylinder.contructor requires GL context as a param."),this.baseRadius=r,this.topRadius=n,this.height=i,this.sectorCount=o,this.stackCount=s,this.smooth=a,this.unitCircleVertices=[],this.vertices=[],this.normals=[],this.texCoords=[],this.indices=[],this.interleavedVertices=[],this.stride=32,e&&(this.vboVertex=e.createBuffer(),this.vboIndex=e.createBuffer()),this.buildUnitCircleVertices(),this.smooth?this.buildVerticesSmooth():this.buildVerticesFlat()}var e,r,n;return e=t,r=[{key:"set",value:function(t,e,r,n,i,o){return this.baseRadius=t,this.topRadius=e,this.height=r,this.sectorCount=n,this.stackCount=i,this.smooth=o,this.buildUnitCircleVertices(),this.smooth?this.buildVerticesSmooth():this.buildVerticesFlat(),this}},{key:"setBaseRadius",value:function(t){return this.baseRadius!=t&&this.set(t,this.topRadius,this.height,this.sectorCount,this.stackCount,this.smooth),this}},{key:"setTopRadius",value:function(t){return this.topRadius!=t&&this.set(this.baseRadius,t,this.height,this.sectorCount,this.stackCount,this.smooth),this}},{key:"setHeight",value:function(t){return this.height!=t&&this.set(this.baseRadius,this.topRadius,t,this.sectorCount,this.stackCount,this.smooth),this}},{key:"setSectorCount",value:function(t){return this.sectorCount!=t&&this.set(this.baseRadius,this.topRadius,this.height,t,this.stackCount,this.smooth),this}},{key:"setStackCount",value:function(t){return this.stackCount!=t&&this.set(this.baseRadius,this.topRadius,this.height,this.sectorCount,t,this.smooth),this}},{key:"setSmooth",value:function(t){return this.smooth!=t&&(this.smooth=t,this.smooth?this.buildVerticesSmooth():this.buildVerticesFlat()),this}},{key:"getTriangleCount",value:function(){return this.getIndexCount()/3}},{key:"getIndexCount",value:function(){return this.indices.length}},{key:"getVertexCount",value:function(){return this.vertices.length/3}},{key:"getNormalCount",value:function(){return this.normals.length/3}},{key:"getTexCoordCount",value:function(){return this.texCoords.length/2}},{key:"toString",value:function(){return"===== Cylinder =====\n   Base Radius: "+this.baseRadius+"\n    Top Radius: "+this.topRadius+"\n        Height: "+this.height+"\n  Sector Count: "+this.sectorCount+"\n   Stack Count: "+this.stackCount+"\n Smooth Shader: "+this.smooth+"\nTriangle Count: "+this.getTriangleCount()+"\n   Index Count: "+this.getIndexCount()+"\n  Vertex Count: "+this.getVertexCount()+"\n  Normal Count: "+this.getNormalCount()+"\nTexCoord Count: "+this.getTexCoordCount()+"\n"}},{key:"clearArrays",value:function(){this.vertices.length=0,this.normals.length=0,this.texCoords.length=0,this.indices.length=0,this.interleavedVertices.length=0}},{key:"resizeArraysSmooth",value:function(){this.clearArrays();var t=(this.sectorCount+1)*(this.stackCount+1),e=2*(this.sectorCount+1);this.vertices=new Float32Array(3*(t+e)),this.normals=new Float32Array(3*(t+e)),this.texCoords=new Float32Array(2*(t+e)),this.indices=new Uint16Array(6*this.sectorCount*this.stackCount+6*this.sectorCount)}},{key:"resizeArraysFlat",value:function(){this.clearArrays();var t=4*this.sectorCount*this.stackCount,e=2*(this.sectorCount+1);this.vertices=new Float32Array(3*(t+e)),this.normals=new Float32Array(3*(t+e)),this.texCoords=new Float32Array(2*(t+e)),this.indices=new Uint16Array(6*this.sectorCount*this.stackCount+6*this.sectorCount)}},{key:"buildUnitCircleVertices",value:function(){var t=2*Math.PI/this.sectorCount,e=0;this.unitCircleVertices.length=0,this.unitCircleVertices=new Float32Array(3*(this.sectorCount+1));for(var r=0,n=0;r<=this.sectorCount;++r,n+=3)e=r*t,this.unitCircleVertices[n]=Math.cos(e),this.unitCircleVertices[n+1]=Math.sin(e),this.unitCircleVertices[n+2]=0}},{key:"buildVerticesSmooth",value:function(){var t,e,r,n,i,o,s,a,u,c,l;this.resizeArraysSmooth();var h=0,f=0,d=0,y=this.getSideNormals();for(s=0;s<=this.stackCount;++s)for(r=-.5*this.height+s/this.stackCount*this.height,n=this.baseRadius+s/this.stackCount*(this.topRadius-this.baseRadius),o=1-s/this.stackCount,a=0,u=0;a<=this.sectorCount;++a,u+=3)t=this.unitCircleVertices[u],e=this.unitCircleVertices[u+1],this.addVertex(h,t*n,e*n,r),this.addNormal(h,y[u],y[u+1],y[u+2]),i=a/this.sectorCount,this.addTexCoord(f,i,o),h+=3,f+=2;var p=h/3;for(r=.5*-this.height,this.addVertex(h,0,0,r),this.addNormal(h,0,0,-1),this.addTexCoord(f,.5,.5),h+=3,f+=2,s=0,a=0;s<this.sectorCount;++s,a+=3)t=this.unitCircleVertices[a],e=this.unitCircleVertices[a+1],this.addVertex(h,t*this.baseRadius,e*this.baseRadius,r),this.addNormal(h,0,0,-1),this.addTexCoord(f,.5*-t+.5,.5*-e+.5),h+=3,f+=2;var v=h/3;for(r=.5*this.height,this.addVertex(h,0,0,r),this.addNormal(h,0,0,1),this.addTexCoord(f,.5,.5),h+=3,f+=2,s=0,a=0;s<this.sectorCount;++s,a+=3)t=this.unitCircleVertices[a],e=this.unitCircleVertices[a+1],this.addVertex(h,t*this.topRadius,e*this.topRadius,r),this.addNormal(h,0,0,1),this.addTexCoord(f,.5*t+.5,.5*-e+.5),h+=3,f+=2;for(s=0;s<this.stackCount;++s)for(l=(c=s*(this.sectorCount+1))+this.sectorCount+1,a=0;a<this.sectorCount;++a,++c,++l)this.addIndices(d,c,c+1,l),this.addIndices(d+3,l,c+1,l+1),d+=6;for(s=0,u=p+1;s<this.sectorCount;++s,++u)s<this.sectorCount-1?this.addIndices(d,p,u+1,u):this.addIndices(d,p,p+1,u),d+=3;for(s=0,u=v+1;s<this.sectorCount;++s,++u)s<this.sectorCount-1?this.addIndices(d,v,u,u+1):this.addIndices(d,v,u,v+1),d+=3;this.buildInterleavedVertices(),this.buildVbos()}},{key:"buildVerticesFlat",value:function(){var e,r,n,i,o,s,a,u,c,h,f,d,y,p,v,b,A,C=[],g={};for(e=0,m=0;e<=this.stackCount;++e)for(s=-.5*this.height+e/this.stackCount*this.height,a=this.baseRadius+e/this.stackCount*(this.topRadius-this.baseRadius),u=1-e/this.stackCount,r=0,n=0,l=0;r<=this.sectorCount;++r,n+=3,l+=2)g={x:(i=this.unitCircleVertices[n])*a,y:(o=this.unitCircleVertices[n+1])*a,z:s,s:r/this.sectorCount,t:u},C.push(g);for(this.resizeArraysFlat(),v=b=A=p=0,e=0;e<this.stackCount;++e)for(vi1=e*(this.sectorCount+1),vi2=(e+1)*(this.sectorCount+1),r=0;r<this.sectorCount;++r,++vi1,++vi2){for(c=C[vi1],h=C[vi2],f=C[vi1+1],d=C[vi2+1],this.addVertex(v,c.x,c.y,c.z),this.addVertex(v+3,h.x,h.y,h.z),this.addVertex(v+6,f.x,f.y,f.z),this.addVertex(v+9,d.x,d.y,d.z),this.addTexCoord(b,c.s,c.t),this.addTexCoord(b+2,h.s,h.t),this.addTexCoord(b+4,f.s,f.t),this.addTexCoord(b+6,d.s,d.t),y=t.computeFaceNormal(c.x,c.y,c.z,f.x,f.y,f.z,h.x,h.y,h.z),n=0;n<4;++n)this.addNormal(v+3*n,y[0],y[1],y[2]);v+=12,b+=8,this.addIndices(A,p,p+2,p+1),this.addIndices(A+3,p+1,p+2,p+3),A+=6,p+=4}var w=v/3;for(s=.5*-this.height,this.addVertex(v,0,0,s),this.addNormal(v,0,0,-1),this.addTexCoord(b,.5,.5),v+=3,b+=2,e=0,r=0;e<this.sectorCount;++e,r+=3)i=this.unitCircleVertices[r],o=this.unitCircleVertices[r+1],this.addVertex(v,i*this.baseRadius,o*this.baseRadius,s),this.addNormal(v,0,0,-1),this.addTexCoord(b,.5*-i+.5,.5*-o+.5),v+=3,b+=2;for(e=0,n=w+1;e<this.sectorCount;++e,++n)e<this.sectorCount-1?this.addIndices(A,w,n+1,n):this.addIndices(A,w,w+1,n),A+=3;var x=v/3;for(s=.5*this.height,this.addVertex(v,0,0,s),this.addNormal(v,0,0,1),this.addTexCoord(b,.5,.5),v+=3,b+=2,e=0,r=0;e<this.sectorCount;++e,r+=3)i=this.unitCircleVertices[r],o=this.unitCircleVertices[r+1],this.addVertex(v,i*this.topRadius,o*this.topRadius,s),this.addNormal(v,0,0,1),this.addTexCoord(b,.5*i+.5,.5*-o+.5),v+=3,b+=2;for(e=0,n=x+1;e<this.sectorCount;++e,++n)e<this.sectorCount-1?this.addIndices(A,x,n,n+1):this.addIndices(A,x,n,x+1),A+=3;this.buildInterleavedVertices(),this.buildVbos()}},{key:"buildInterleavedVertices",value:function(){var t,e,r,n=this.getVertexCount();for(this.interleavedVertices.length=0,this.interleavedVertices=new Float32Array(8*n),t=0,e=0,r=0;t<this.vertices.length;t+=3,e+=2,r+=8)this.interleavedVertices[r]=this.vertices[t],this.interleavedVertices[r+1]=this.vertices[t+1],this.interleavedVertices[r+2]=this.vertices[t+2],this.interleavedVertices[r+3]=this.normals[t],this.interleavedVertices[r+4]=this.normals[t+1],this.interleavedVertices[r+5]=this.normals[t+2],this.interleavedVertices[r+6]=this.texCoords[e],this.interleavedVertices[r+7]=this.texCoords[e+1]}},{key:"buildVbos",value:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vboVertex),t.bufferData(t.ARRAY_BUFFER,this.interleavedVertices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.vboIndex),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"getSideNormals",value:function(){for(var t=2*Math.PI/this.sectorCount,e=0,r=Math.atan2(this.baseRadius-this.topRadius,this.height),n=Math.cos(r),i=Math.sin(r),o=new Float32Array(3*(this.sectorCount+1)),s=0,a=0;s<=this.sectorCount;++s,a+=3)e=s*t,o[a]=Math.cos(e)*n-0*Math.sin(e),o[a+1]=Math.sin(e)*n+0*Math.cos(e),o[a+2]=i;return o}},{key:"addVertex",value:function(t,e,r,n){this.vertices[t]=e,this.vertices[t+1]=r,this.vertices[t+2]=n}},{key:"addNormal",value:function(t,e,r,n){this.normals[t]=e,this.normals[t+1]=r,this.normals[t+2]=n}},{key:"addTexCoord",value:function(t,e,r){this.texCoords[t]=e,this.texCoords[t+1]=r}},{key:"addIndices",value:function(t,e,r,n){this.indices[t]=e,this.indices[t+1]=r,this.indices[t+2]=n}}],n=[{key:"computeFaceNormal",value:function(t,e,r,n,i,o,s,a,u){var c=new Float32Array(3),l=n-t,h=i-e,f=o-r,d=s-t,y=a-e,p=u-r,v=h*p-f*y,b=f*d-l*p,m=l*y-h*d,A=Math.sqrt(v*v+b*b+m*m);return A>1e-6&&(c[0]=v/A,c[1]=b/A,c[2]=m/A),c}}],r&&yt(e.prototype,r),n&&yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===vt(i)?i:String(i)),n)}var i}var mt,At,Ct,gt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,e||log("[WARNING] Sphere.contructor requires GL context as a param."),this.radius=1,this.sectorCount=36,this.stackCount=18,this.smooth=!0,this.vertices=[],this.normals=[],this.texCoords=[],this.indices=[],this.interleavedVertices=[],this.stride=32,e&&(this.vboVertex=e.createBuffer(),this.vboIndex=e.createBuffer()),this.set(r,n,i,o)}var e,r,n;return e=t,r=[{key:"set",value:function(t,e,r,n){return this.radius=t,this.sectorCount=e,e<3&&(this.sectorCount=3),this.stackCount=r,r<2&&(this.stackCount=2),this.smooth=n,n?this.buildVerticesSmooth():this.buildVerticesFlat(),this}},{key:"setRadius",value:function(t){return this.radius!=t&&this.set(t,this.sectorCount,this.stackCount,this.smooth),this}},{key:"setSectorCount",value:function(t){return this.sectorCount!=t&&this.set(this.radius,t,this.stackCount,this.smooth),this}},{key:"setStackCount",value:function(t){return this.stackCount!=t&&this.set(this.radius,this.sectorCount,t,this.smooth),this}},{key:"setSmooth",value:function(t){return this.smooth!=t&&(this.smooth=t,this.smooth?this.buildVerticesSmooth():this.buildVerticesFlat()),this}},{key:"reverseNormals",value:function(){var t,e,r,n=this.normals.length;for(t=0,e=3;t<n;t+=3,e+=8)this.normals[t]*=-1,this.normals[t+1]*=-1,this.normals[t+2]*=-1,this.interleavedVertices[e]=this.normals[t],this.interleavedVertices[e+1]=this.normals[t+1],this.interleavedVertices[e+2]=this.normals[t+2];for(n=this.indices.length,t=0;t<n;t+=3)r=this.indices[t],this.indices[t]=this.indices[t+2],this.indices[t+2]=r;this.buildVbos()}},{key:"getTriangleCount",value:function(){return this.getIndexCount()/3}},{key:"getIndexCount",value:function(){return this.indices.length}},{key:"getVertexCount",value:function(){return this.vertices.length/3}},{key:"getNormalCount",value:function(){return this.normals.length/3}},{key:"getTexCoordCount",value:function(){return this.texCoords.length/2}},{key:"toString",value:function(){return"===== Sphere =====\n        Radius: "+this.radius+"\n  Sector Count: "+this.sectorCount+"\n   Stack Count: "+this.stackCount+"\n Smooth Shader: "+this.smooth+"\nTriangle Count: "+this.getTriangleCount()+"\n   Index Count: "+this.getIndexCount()+"\n  Vertex Count: "+this.getVertexCount()+"\n  Normal Count: "+this.getNormalCount()+"\nTexCoord Count: "+this.getTexCoordCount()+"\n"}},{key:"clearArrays",value:function(){this.vertices.length=0,this.normals.length=0,this.texCoords.length=0,this.indices.length=0,this.interleavedVertices.length=0}},{key:"resizeArraysSmooth",value:function(){this.clearArrays();var t=(this.sectorCount+1)*(this.stackCount+1);this.vertices=new Float32Array(3*t),this.normals=new Float32Array(3*t),this.texCoords=new Float32Array(2*t),this.indices=new Uint16Array(6*this.sectorCount*(this.stackCount-1))}},{key:"resizeArraysFlat",value:function(){this.clearArrays();var t=6*this.sectorCount+4*this.sectorCount*(this.stackCount-2);this.vertices=new Float32Array(3*t),this.normals=new Float32Array(3*t),this.texCoords=new Float32Array(2*t),this.indices=new Uint16Array(6*this.sectorCount*(this.stackCount-1))}},{key:"buildVerticesSmooth",value:function(){var t,e,r,n,i,o,s,a,u,c,l,h,f,d,y,p;this.resizeArraysSmooth();var v,b,m=1/this.radius,A=2*Math.PI/this.sectorCount,C=Math.PI/this.stackCount;for(d=y=p=0,c=0;c<=this.stackCount;++c)for(b=Math.PI/2-c*C,n=this.radius*Math.cos(b),r=this.radius*Math.sin(b),l=0;l<=this.sectorCount;++l)v=l*A,t=n*Math.cos(v),e=n*Math.sin(v),this.addVertex(d,t,e,r),i=t*m,o=e*m,s=r*m,this.addNormal(d,i,o,s),a=l/this.sectorCount,u=c/this.stackCount,this.addTexCoord(y,a,u),d+=3,y+=2;for(c=0;c<this.stackCount;++c)for(f=(h=c*(this.sectorCount+1))+this.sectorCount+1,l=0;l<this.sectorCount;++l,++h,++f)0!=c&&(this.addIndices(p,h,f,h+1),p+=3),c!=this.stackCount-1&&(this.addIndices(p,h+1,f,f+1),p+=3);this.buildInterleavedVertices(),this.buildVbos()}},{key:"buildVerticesFlat",value:function(){var e,r,n,i,o,s,a,u,c,l,h,f,d,y,p,v,b,m=2*Math.PI/this.sectorCount,A=Math.PI/this.stackCount,C=[],g={};for(e=0;e<=this.stackCount;++e)for(b=Math.PI/2-e*A,o=this.radius*Math.cos(b),n=this.radius*Math.sin(b),r=0;r<=this.sectorCount;++r)v=r*m,g={x:o*Math.cos(v),y:o*Math.sin(v),z:n,s:r/this.sectorCount,t:e/this.stackCount},C.push(g);for(this.resizeArraysFlat(),d=y=p=f=0,e=0;e<this.stackCount;++e)for(l=e*(this.sectorCount+1),h=(e+1)*(this.sectorCount+1),r=0;r<this.sectorCount;++r,++l,++h)s=C[l],a=C[h],u=C[l+1],c=C[h+1],0==e?(this.addVertex(d,s.x,s.y,s.z),this.addVertex(d+3,a.x,a.y,a.z),this.addVertex(d+6,c.x,c.y,c.z),this.addTexCoord(y,s.s,s.t),this.addTexCoord(y+2,a.s,a.t),this.addTexCoord(y+4,c.s,c.t),i=t.computeFaceNormal(s.x,s.y,s.z,a.x,a.y,a.z,c.x,c.y,c.z),this.addNormal(d,i[0],i[1],i[2]),this.addNormal(d+3,i[0],i[1],i[2]),this.addNormal(d+6,i[0],i[1],i[2]),this.addIndices(p,f,f+1,f+2),d+=9,y+=6,p+=3,f+=3):e==this.stackCount-1?(this.addVertex(d,s.x,s.y,s.z),this.addVertex(d+3,a.x,a.y,a.z),this.addVertex(d+6,u.x,u.y,u.z),this.addTexCoord(y,s.s,s.t),this.addTexCoord(y+2,a.s,a.t),this.addTexCoord(y+4,u.s,u.t),i=t.computeFaceNormal(s.x,s.y,s.z,a.x,a.y,a.z,u.x,u.y,u.z),this.addNormal(d,i[0],i[1],i[2]),this.addNormal(d+3,i[0],i[1],i[2]),this.addNormal(d+6,i[0],i[1],i[2]),this.addIndices(p,f,f+1,f+2),d+=9,y+=6,p+=3,f+=3):(this.addVertex(d,s.x,s.y,s.z),this.addVertex(d+3,a.x,a.y,a.z),this.addVertex(d+6,u.x,u.y,u.z),this.addVertex(d+9,c.x,c.y,c.z),this.addTexCoord(y,s.s,s.t),this.addTexCoord(y+2,a.s,a.t),this.addTexCoord(y+4,u.s,u.t),this.addTexCoord(y+6,c.s,c.t),i=t.computeFaceNormal(s.x,s.y,s.z,a.x,a.y,a.z,u.x,u.y,u.z),this.addNormal(d,i[0],i[1],i[2]),this.addNormal(d+3,i[0],i[1],i[2]),this.addNormal(d+6,i[0],i[1],i[2]),this.addIndices(p,f,f+1,f+2),this.addIndices(p+3,f+2,f+1,f+3),d+=12,y+=8,p+=6,f+=4);this.buildInterleavedVertices(),this.buildVbos()}},{key:"buildInterleavedVertices",value:function(){var t,e,r,n=this.getVertexCount();for(this.interleavedVertices.length=0,this.interleavedVertices=new Float32Array(8*n),t=0,e=0,r=0;t<this.vertices.length;t+=3,e+=2,r+=8)this.interleavedVertices[r]=this.vertices[t],this.interleavedVertices[r+1]=this.vertices[t+1],this.interleavedVertices[r+2]=this.vertices[t+2],this.interleavedVertices[r+3]=this.normals[t],this.interleavedVertices[r+4]=this.normals[t+1],this.interleavedVertices[r+5]=this.normals[t+2],this.interleavedVertices[r+6]=this.texCoords[e],this.interleavedVertices[r+7]=this.texCoords[e+1]}},{key:"buildVbos",value:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vboVertex),t.bufferData(t.ARRAY_BUFFER,this.interleavedVertices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.vboIndex),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"addVertex",value:function(t,e,r,n){this.vertices[t]=e,this.vertices[t+1]=r,this.vertices[t+2]=n}},{key:"addNormal",value:function(t,e,r,n){this.normals[t]=e,this.normals[t+1]=r,this.normals[t+2]=n}},{key:"addTexCoord",value:function(t,e,r){this.texCoords[t]=e,this.texCoords[t+1]=r}},{key:"addIndices",value:function(t,e,r,n){this.indices[t]=e,this.indices[t+1]=r,this.indices[t+2]=n}}],n=[{key:"computeFaceNormal",value:function(t,e,r,n,i,o,s,a,u){var c=new Float32Array(3),l=n-t,h=i-e,f=o-r,d=s-t,y=a-e,p=u-r,v=h*p-f*y,b=f*d-l*p,m=l*y-h*d,A=Math.sqrt(v*v+b*b+m*m);return A>1e-6&&(c[0]=v/A,c[1]=b/A,c[2]=m/A),c}}],r&&bt(e.prototype,r),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,St(n.key),n)}}function St(t){var e=function(t,e){if("object"!==wt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===wt(e)?e:String(e)}!function(t){function e(t,e){t*=i.FLOATS_PER_COLOR;for(var r=new Array(t),n=0;n<t;n+=i.FLOATS_PER_COLOR)r[n]=e.red,r[n+1]=e.green,r[n+2]=e.blue,r[n+3]=e.alpha;return r}t.createCube=function(t,r,n){for(var o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],s=0;s<o.length;s++)o[s]*=r;var a=e(o.length/i.FLOATS_PER_VERTEX,n);return ut.create(t,o,a,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23])},t.createCylinder=function(t,r,n,o,s,a,u){var c=new pt(t,r,n,o,s,a,!0),l=c.vertices,h=e(l.length/i.FLOATS_PER_VERTEX,u),f=c.indices;return ut.create(t,l,h,f)},t.createSphere=function(t,r,n,o,s){var a=new gt(t,r,n,o,!0),u=a.vertices,c=a.indices,l=e(u.length/i.FLOATS_PER_VERTEX,s);return ut.create(t,u,l,c)}}(mt||(mt={})),(Ct=At||(At={})).createCube=function(t,e){return new D([mt.createCube(t,1,e)])},Ct.createCylinder=function(t,e){return new D([mt.createCylinder(t,1,1,2,36,1,e)])},Ct.createSphere=function(t,e){return new D([mt.createSphere(t,.75,18,18,e)])};var kt=function(){function t(){var e,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=[],(r=St(r="entities"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,this.entities=i}var e,r,n;return e=t,r=[{key:"update",value:function(t){this.entities.forEach((function(e){e.update(t)}))}},{key:"render",value:function(t,e){this.entities.forEach((function(r){r.render(t,e)}))}},{key:"addEntity",value:function(t){this.entities.push(t)}},{key:"addEntities",value:function(t){var e=this;t.forEach((function(t){e.addEntity(t)}))}}],n=[{key:"create",value:function(e,r){var n=new D;n.addComponent(new ht(Math.PI/2,Math.PI/2,Math.PI/2,n.rotation)),r.parent=n,r.translation=new I(0,0,6),r.addComponent(new ft(10,r.translation));var i=At.createCube(e,q.fromInt8(72,107,127));i.scale=I.multiply(I.one,.5),i.addComponent(new lt(0,2,0,-1,.125)),i.addComponent(new ct(0,.25,0));var o=At.createCylinder(e,q.fromInt8(209,191,176));o.parent=i,o.translation=I.multiply(I.up,4),o.scale=I.multiply(I.one,.5),o.addComponent(new ct(0,2,1.4));for(var s=[],a=q.fromInt8(187,71,79),u=q.fromInt8(122,156,150),c=0;c<8;c++){var l,h=2*Math.PI*(c/8),f=new I(Math.cos(h),Math.sin(h),0),d=I.multiply(f,3);l=0===c?a:q.lerp(u,a,Math.abs(Math.PI-h)/Math.PI);var y=At.createSphere(e,l);y.parent=o,y.translation=d,y.addComponent(new lt(-10,10,d.x,d.y,.125,c)),s.push(y)}return new t(s.concat([r,i,o,n]))}}],r&&xt(e.prototype,r),n&&xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Rt=r(379),Et=r.n(Rt),Pt=r(795),Tt=r.n(Pt),Ot=r(569),It=r.n(Ot),Vt=r(565),jt=r.n(Vt),_t=r(216),Mt=r.n(_t),Ft=r(589),Bt=r.n(Ft),Nt=r(406),zt={};zt.styleTagTransform=Bt(),zt.setAttributes=jt(),zt.insert=It().bind(null,"head"),zt.domAPI=Tt(),zt.insertStyleElement=Mt(),Et()(Nt.Z,zt),Nt.Z&&Nt.Z.locals&&Nt.Z.locals;var Dt,Ut,Lt,Yt=0,Wt=document.getElementById("code00-canvas");function Xt(t){var e=.001*(t-Yt);Yt=t,function(t){Ut.update(t)}(e),Lt.Begin(Dt),Ut.render(Dt,Lt),requestAnimationFrame(Xt)}!function(){if(Dt=function(t){var e;try{e=t.getContext("webgl2")}catch(t){e=null,console.error("Couldn't load the WebGL context")}return e}(Wt),Dt){var t=r(398),e=r(368),i=r(403),o=q.fromInt8(57,43,53);n.initialize(t),Lt=K.create(Dt,e,i,o),Ut=kt.create(Dt,Lt.camera),requestAnimationFrame(Xt)}else alert("Could not initialise WebGL, sorry :-(")}()})()})();
//# sourceMappingURL=main213a9e594b94fd29131f.js.map